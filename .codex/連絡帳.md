# 連絡帳
人間が実装結果にOKを出したらやったことを３行程度で追記してください。

2025-09-02 フェーズ1完了（担当: AI）
- Vite + React + TypeScript の最小構成を作成。
- SVG を用いた GameElement で "Hello, world" を表示。
- 開発/ビルド/プレビュー用スクリプトを用意。

2025-09-02 フェーズ2完了（担当: AI）
- データ構造: Mana/Player/GameState（クラス化・不変更新・clone対応）。
- 初期化: InitialGameState で4人、固定3+特殊2配布、山札生成。
- カード: Card型+CARDS配列、ID化・isFixed導入、定数整理。

2025-09-02 フェーズ3進捗（担当: AI）
- SVGレイアウト骨組み: Field/UserField/Card/Statusを追加。
- 上左右の回転配置・オープンカード4枚配置、山札は非表示。
- 左右ステータスの向きを修正。位置関係OK、細部は今後調整。

2025-09-06 フェーズ3 更新（担当: AI）
- デザイン微調整: カードサイズを統一・拡大。`FieldElement` で共通幅を算出し場札/手札へ適用。
- 手札レイアウトを調整: 上下は横一列、左右はステータス左・手札右で縦中央寄せ。
- コンポーネント分割: `PlayerFieldElement`/`CpuFieldElement` を追加し、`FieldElement` から使い分け。

2025-09-06 場札位置と見切れ対策 完了（担当: AI）
- オープンカードを各席コンポーネント内に統一し、手札中央の真上へ配置（席ごとの分岐なし）。
- `FieldElement` で Seat画像に上余白（`OPEN_TOP_MARGIN`）を付与し、見切れを解消して配置は据え置き。
- 未使用のimport/定数を整理して型エラーを解消。係数調整で距離感を微調整可能。

2025-09-06 ゲームのコアロジックを実装 いったん完了（担当: 人間）
- カード関係のデータ構造を変更(typeではなくclassに)
- src/model/cards/Card フォルダにカード類のロジックを実装
- src/model/GameState.ts にゲームの進行ロジックを実装

2025-09-07 モデル再確認＆微修正（担当: AI）
- 基底`Card`にデフォルト実装を用意（ダメージ/フック/追加マナ）。未実装カードでも実行時に落ちないように。
- `GameState.playableHands()`でnull場札を除外するよう修正（undefined呼び出し防止）。
- .codex/データ構造.md を最新構成に更新（`mode`/classベースCardとフック群）。

2025-09-10 枚数制限 完了（担当: AI,レートリミットが途中で尽きたので人間が代筆）
- isFixedプロパティをisSpecialに名称変更し、意味を逆に
- maxHandsプロパティを追加し、手札の枚数制限を実装
- isSpecial=falseのカードは枚数無制限ではなく5枚制限に
- 出せるカードがない場合には敗北扱いに

2025-09-07 ルール/UI 改修（担当: AI）
- カード分類を isSpecial に統一（true=特殊/消費）。非特殊は各ID×5枚に変更。定数 MAX_NON_SPECIAL_COPIES を追加。
- 初期化/次局配布を更新（非特殊×5＋特殊2）。プレイ時は特殊/非特殊問わず1枚消費。
- 「出せるカードがない」場合は即敗北の処理を追加（フック考慮）。
- 手札UI: 同一IDを重ね、左下に半透明バッジで枚数表示。∞マーク削除。
- 星と結果UI: roundoverに星の増減、gameoverで最終順位（同星は同順位）＋星数を表示。
* 2024-10-05: 共通コンポーネント化で盤面UIを整理しました。詳細は src/components/HandStacks.tsx, SeatOpenCard.tsx, SeatStatusFrame.tsx, HoverPreviewLayer.tsx, fieldLayout.ts を参照。ビルド済み。
